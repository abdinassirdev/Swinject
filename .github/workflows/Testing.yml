name: Testing
on: 
  workflow_dispatch:
# on:
#   pull_request:
#     branches:
#     - master
jobs:
  test:
    name: Testing iOS Framework
    runs-on: macOS-latest
    strategy:
      matrix:
       include:
         - platform-version: iOS
           JOB: "XCODE"
           DEST: "OS=14.0,name=iPhone 8"
           SCHEME: "Swinject-iOS"
           SDK: "iphonesimulator"
           ACTION: "test"
           PLATFORM: "iOS"
         - platform-version: macOS
           JOB: "XCODE"
           DEST: "arch=x86_64"
           SCHEME: "Swinject-macOS"
           SDK: "macosx"
           ACTION: "test"
           PLATFORM: "OSX"
    steps:
      - name: Checkout repository
        uses: actions/checkout@v1
      # - name: Force XCode 12.5.1
      #   run: sudo xcode-select -switch /Applications/Xcode_12.5.1.app
      # - name: Testing Swift package
      #   run: exec ./.github/scripts/test_swift_package.sh
      - name: Testing iOS app
        run: exec ./.github/scripts/test_script.sh