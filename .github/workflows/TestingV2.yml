# This is the First Workflow for Testing with Github Actions

name: TestingV2
on:
  workflow_dispatch:
env: 
  PROJECT: Swinject.xcodeproj
jobs:
  test:
    runs-on: macOS-latest
    strategy:
      matrix:
       include:
         - platform-version: iOS
           JOB: "XCODE"
           DEST: "OS=14.0,name=iPhone 8"
           SCHEME: "Swinject-iOS"
           SDK: "iphonesimulator"
           ACTION: "test"
           PLATFORM: "iOS"
         - platform-version: macOS
           JOB: "XCODE"
           DEST: "arch=x86_64"
           SCHEME: "Swinject-macOS"
           SDK: "macosx"
           ACTION: "test"
           PLATFORM: "OSX"
    steps:
      - name: Checkout repository
        uses: actions/checkout@v1
      - name: Testing iOS app
        run: xcodebuild "${{ matrix.ACTION }}" -project "${{ env.PROJECT }}" -scheme "${{ matrix.SCHEME }}" -sdk "${{ matrix.SDK }}" -destination "${{ matrix.DEST }}" -configuration Release ENABLE_TESTABILITY=YES | xcpretty